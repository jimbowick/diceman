<html>
<style>
img {
    width:25%;
    }
</style>
<title> Get High </title>
<header>
<marquee>Get High</marquee>
</header>
<p><center>The game where you, the consumer, can get high too!</center></p>
<body style="background-color:powderblue;">
<p> 
    <center>Please, click</center>
    <center><a href="main.html">
        <img src="here.png" onmouseover="this.src='herered.png'" 
        onmouseout="this.src='here.png'" alt="Here Bois!">
    </a></center>
    <center><a href="diceman.html">Face the Diceman</a></center>
    <center>to become a part of the <a href="http:/www.sensation.com">sensation</a></a> bringing meaning 
    to the lives of assholes the world over.</center>
</p>
<p/>
<p id="spacer1"></p>
<p id="spacer2" ></p>
<p><Button id="dicey" style="width:200px"></Button></p>
<P id="enemy"></P>
<script type="text/javascript" src="dicemanager.js"></script>
<script type="text/javascript" src="tablemaker.js"></script>
<script>


function getAttacked(enemyRoll){
    if(enemyRoll>equipped.armor){
        equipped.health = equipped.health - currentEnemy.attackDamage
        myTableMaker.RefreshCharacterStatus()
    }
    if(equipped.health<=0){
        equipped.health = 0    
        myTableMaker.RefreshCharacterStatus()
       daButton.innerHTML = "You're Dead - Click to revive"
       daButton.onclick = function(){
            equipped.health = 100
            myTableMaker.RefreshCharacterStatus()
            EnterNewBattle()
           
       };
    }
}
function killAnEnemy(){
    document.getElementById("enemy").innerHTML = "The enemy has died!";
    document.getElementById("dicey").innerHTML = "Find a new foe";
    daButton.onclick = function(){
        currentEnemy = {health:10,armorrating:5,attackDamage:8};
        EnterNewBattle()
    };
}
function showAnEnemy(){
    document.getElementById("enemy").innerHTML = "Enemy Health: " + currentEnemy.health + " , Enemy Armor Rating: "+currentEnemy.armorrating
}
function attackEnemy(num,i){
    if(num>currentEnemy.armorrating){
        currentEnemy.health = currentEnemy.health - moveset[i].damage
        showAnEnemy()
    }
    if(currentEnemy.health<=0){
        killAnEnemy()
    }
}

function ButtonToBattleMode(){
    daButton.innerHTML = "click to roll"
    daButton.onclick = function(){
        var numberRolled = dicemanager()
        this.innerHTML = numberRolled
        attackEnemy(numberRolled,0)
        getAttacked(dicemanager())
    };
}
function EnterNewBattle(){
    showAnEnemy()
    ButtonToBattleMode()
}
var daButton = document.getElementById("dicey");
var currentEnemy = {health:10,armorrating:5,attackDamage:8}
var moveset = [ {movename:"surestrike", damage:8}, {movename:"lightstrike", damage:4} ]
var equipped = {weapon:"sword of ages", armor:1, health:100}
var myTableMaker = new tablemaker(moveset,equipped)
myTableMaker.ShowCharacterStatus()
EnterNewBattle()
</script>
</body>
</html>