<html>
<style>
img {
    width:25%;
    }
</style>
<title> Get High </title>
<header>
<marquee>Get High</marquee>
</header>
<p><center>The game where you, the consumer, can get high too!</center></p>
<body style="background-color:powderblue;">
<p> 
    <center>Please, click</center>
    <center><a href="main.html">
        <img src="here.png" onmouseover="this.src='herered.png'" 
        onmouseout="this.src='here.png'" alt="Here Bois!">
    </a></center>
    <center><a href="diceman.html">Face the Diceman</a></center>
    <center>to become a part of the <a href="http:/www.sensation.com">sensation</a></a> bringing meaning 
    to the lives of assholes the world over.</center>
</p>
<p/>
<table border="1" width="500"><tr><td height="100" id=infoPanel><center>Welcome to the land of crazy shit</center></td></tr></table>
<button id="navi1"></button>
<button id="navi2"></button>
<p id="spacer1"></p>
<p id="spacer2" ></p>
<p><Button id="dicey" style="width:200px"></Button></p>
<P id="enemy"></P>
<script type="text/javascript" src="dicemanager.js"></script>
<script type="text/javascript" src="tablemaker.js"></script>
<script>


function getAttacked(enemyRoll){
    if(enemyRoll>playerStats.armor){
        playerStats.health = playerStats.health - currentEnemy.attackDamage
        myTableMaker.RefreshCharacterStatus()
    }
    if(playerStats.health<=0){
        playerStats.health = 0    
        myTableMaker.RefreshCharacterStatus()
       daButton.innerHTML = "You're Dead - Click to revive"
       daButton.onclick = function(){
            playerStats.health = 100
            myTableMaker.RefreshCharacterStatus()
            EnterNewBattle()
           
       };
    }
}
function killAnEnemy(){
    document.getElementById("enemy").innerHTML = "The enemy has died!";
    document.getElementById("dicey").innerHTML = "Find a new foe";
    daButton.onclick = function(){
        currentEnemy = {health:10,armorrating:5,attackDamage:8};
        EnterNewBattle()
    };
}
function showAnEnemy(){
    document.getElementById("enemy").innerHTML = "Enemy Health: " + currentEnemy.health + " , Enemy Armor Rating: "+currentEnemy.armorrating
}
function attackEnemy(num,i){
    if(num>currentEnemy.armorrating){
        currentEnemy.health = currentEnemy.health - moveset[i].damage
        showAnEnemy()
    }
    if(currentEnemy.health<=0){
        killAnEnemy()
    }
}

function ButtonToBattleMode(){
    daButton.innerHTML = "click to roll"
    daButton.onclick = function(){
        var numberRolled = dicemanager()
        this.innerHTML = numberRolled
        attackEnemy(numberRolled,0)
        getAttacked(dicemanager())
    };
}
function EnterNewBattle(){
    showAnEnemy()
    ButtonToBattleMode()
}

function ButtonToNavigate(){
    naviButton1.innerHTML ="Go find enemies"
    naviButton1.onclick = function(){
        EnterNewBattle()
    }   
    naviButton2.innerHTML ="Rest and Heal"
    naviButton2.onclick = function(){
        playerStats.health = playerStats.health + 6
        myTableMaker.RefreshCharacterStatus()
    if(playerStats.health>=100){
        playerStats.health = 100
        myTableMaker.RefreshCharacterStatus()
        document.getElementById("infoPanel").innerHTML = "You are fully refreshed. Continue the fight lazy swine!"

    }
    }     

}

var naviButton1 = document.getElementById("navi1");
var naviButton2 = document.getElementById("navi2");
var daButton = document.getElementById("dicey");
var currentEnemy = {health:10,armorrating:3,attackDamage:8}
var moveset = [ {movename:"surestrike", damage:8}, {movename:"lightstrike", damage:4} ]
var playerStats = {weapon:"sword of ages", armor:5, health:100}
var myTableMaker = new tablemaker(moveset,playerStats)
myTableMaker.ShowCharacterStatus()
ButtonToNavigate()
</script>
</body>
</html>